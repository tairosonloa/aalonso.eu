<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Failure configuring Windows updates. Reverting changes - Aitor Alonso</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<!-- favicon -->
		<link rel="shortcut icon" href="../../../../images/me.png"/>
		<link rel="stylesheet" href="../../../../assets/css/main.css"/>
		<link rel="stylesheet" href="../../../../assets/css/blog.css"/>
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
	</head>
	<body>
		<main>
			<article>
				<h1>Failure configuring Windows updates. Reverting changes.</h1>
				<div class="blog-entry-info"><h5><a href="../../../es/2018/01/27.html">Versión en español</a></h5></div>
				<div class="blog-entry-info"><time itemprop="datePublished" datetime="2018-01-27"><h5 id="date-published">January 27, 2018</h5></time></div>
				<img class="blog-image" src="../../../../images/blog/2018-01-27.jpg" alt=""/>
				<p>
					If you are here looking for a solution for this error, and your system is dual-boot with Windows
					and GNU/Linux, and don't want to read why I think Microsoft Windows's are the worst operative systems
					ever made, <a href="#solution">click here</a> to jump all my "rage".
				</p>
				<p>
					Well, you are still here. So I can suppose you also think Microsoft Windows OS's are a pain in the ass.
					I think we'll get on well. First of all, it's true that Windows was made to bring the computers to the
					domestic user. And it's an evidence that they achieved it the fact that the very most of the computers
					you can find in a store have Windows preinstalled.
				</p>
				<p>
					But Microsoft forgot <strong>ONE</strong> thing. One, in my opinion, important thing. And this is that, in fact,
					no all the users are domestic ones. Some users are professional which need more from their computer.
					And also there are professional and non-professional users with advanced knowledge about computers, because
					exist people that study/work in something related to computer sciences or are a self-learn geek (or even both-in-one).
				</p>
				<p>
					So, the point here isn't that when an error occurs on your system, the error message is useless or just a
					hexadecimal value. Nor that there isn't any log file or place to look what is happening. So the solution is
					going to the support forums and post your problem or search for users with similar or the same problem. And
					when you get lucky and you get a Microsoft worker response, it is stupid or tedious.
				</p>
				<p>
					Really, it looks like if they never read the people problems. And they don't need to. People already have
					bought their OS, and most of them will continue buying it in the future because they don't know anything
					better or they are afraid to test anything different. Or because like me, some we need it to run certain software.
				</p>
				<p>
					Well, so you have a response from official support. This response guides you to a help page on the support
					website. And this page tells a tedious and generic procedure for all the problems you can face using Windows.
					That is: restart your system, disable or deinstall antivirus, search for problems with the solver, update your
					drivers...
				</p>
				<p>
					And after tons of time wasted on following those stupids procedures, obviously anything of this works. And this
					is <strong>BECAUSE NOTHING</strong> of those is the cause of the problem. It has sense, isn't it? And after all,
					they don't know how to help you, even when you have technical knowledge and you give them precise information
					about your system configuration (both hardware and software), ways to get the error, and what you think are
					possible causes of it.
				</p>
				<p>
					I had this problem, "Failure configuring Windows updates. Reverting changes", since November 2017 every time I
					turned off, booted o rebooted Windows. It always failed to install Windows 10 Falls Creators Update (version
					1709). I ignored it because I only use Windows to play video games sporadically, and I was on a date of tons of
					work at the university. So now in January and after my final exams, I get time to research a solution. All the
					people that I found on the support forums with the same problem that me (or very similar one) told that they
					have a dual-boot Windows and GNU/Linux installation, so I started focusing on it.
				</p>
				<p id="solution">
					So here I am, to bring you the help you need and Microsoft doesn't know how to. The problem here is that this
					is a major update, in which Windows suppose he has entire control over the system. So booting grub (or whatever
					bootloader different from the Windows one) and selecting Windows doesn't work this time, in contrast to other times.
				</p>
				<p>
					So what you have to do to let this update installs, is restore Windows bootloader, update your windows, and then
					restore your default bootloader. I will explain what I did. Nothing of your GNU/Linux data and partitions will
					be erased after this, but you will need a live-CD or bootable USB to restore your bootloader.
				</p>
				<p>
					A disclaimer, I won't explain how to do this for a specific GNU/Linux distribution and I suppose you have a
					minimum idea of what I am / you are doing here, so I don't take responsibility for any data loss or another
					mishap during the process. This procedure should work on any GNU/Linux distribution and Windows Vista or above
					installation (mine: ArchLinux and Windows 10), and also I'll try to explain what I'm doing at every step.
				</p>
				<p>
					First of all, restore Windows bootloader. This must be done from Windows. Open a console as administrator
					(search for "cmd" and right click "Open as administrator", or just right click on Windows icon and select
					"Administrator console" or similar). On the console you must introduce this command:
				</p>
				<p><code>bootsect /nt60 C: /mbr</code></p>
				<p>
					You can get more help about this command if you type <code>bootsect /help</code>, but briefly what it does
					is to restore Windows bootloader indicating that Windows is installed in the <code>C:</code> partition,
					the Windows version is Vista or above (<code>/nt60</code>) and please don't destroy the partition table on
					disk (<code>/mbr</code>).
				</p>
				<p>
					I got an error message telling me that maybe it failed (yes, maybe), but I rebooted my system and it started to
					boot Windows. No grub and no option to boot GNU/Linux appeared. Back on Windows, just try to update like always.
					After a long time update process, with some system restart, you will have your Windows installation up to date.
					Congratulations!
				</p>
				<p>
					Don't forget to disable fast startup Windows feature, which can cause fails to boot GNU/Linux after turn off
					Windows. To do that, press Win+X or right-click Windows icon an select "Power Options". Now click "Choose what
					the power buttons do". Then click on "Change settings that are currently unavailable" and disable "Turn on fast
					startup (recommended)" checkbox.
				</p>
				<p>
					Now it's time to restore our loved bootloader, in my case grub. What I did was boot into my ArchLinux USB to get
					a bash terminal. Then you must mount all GNU/Linux partitions. In my case (remember to replace sdxY with yours):
				</p>
				<p><code># mount /dev/sda5 /mnt</code><br><code># mount /dev/sdb5 /mnt/home</code><p>
				<p>If you are running a UEFI system, you might have to mount your EFI directory to <code>/mnt/boot/efi</code></p>
				<p>Now, <code>chroot</code> into your GNU/Linux install.</p>
				<p>If you are using ArchLinux:</p>
				<p><code># arch-chroot /mnt</code></p>
				<p>In most of the other cases:</p>
				<p><code># chroot /mnt</code></p>
				<p>And now, that we are logged on the GNU/Linux installation and not de live-CD or USB, we restore grub:</p>
				<p><code># grub-install /dev/sda</code></p>
				<p>And set its configuration. If you are using ArchLinux:</p>
				<p><code># grub-mkconfig -o /boot/grub/grub.cfg</code></p>
				<p>In most of the other cases:</p>
				<p><code># update-grub</code></p>
				<p>
					And after that, you can type <code>reboot</code> and grub will appear again, with your Windows and GNU/Linux,
					and all the data on them.
				</p>
				<p>F*cking Windows.</p>
			</article>
		</main>
		<footer>
			<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" class="license-icon-link">
				<img alt="Creative Commons license by-nc-sa" src="../../../../images/blog/cc-by-nc-sa-4.0.png"/>
			</a><br/>
			This article is under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">Creative Commons license Attribution-NonCommercial-ShareAlike 4.0 International</a>.<br>
			Este artículo está bajo <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.es" target="_blank">licencia Creative Commons Reconocimiento-NoComercial-CompartirIgual 4.0 Internacional</a>.<br>
		</footer>
	</body>
</html>
